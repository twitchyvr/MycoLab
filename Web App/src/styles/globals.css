/* Custom Font - Using a distinctive sans-serif */
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   MYCOLAB - Global Styles
   ============================================================================ */

:root {
  /* ============================================================================
     THEME-AWARE CSS VARIABLES
     These are set dynamically by ThemeContext but have fallbacks for default
     ============================================================================ */

  /* Background colors */
  --bg-primary: #000000;
  --bg-secondary: #0A1628;
  --bg-tertiary: #0F1D32;
  --bg-card: rgba(15, 29, 50, 0.5);
  --bg-card-hover: rgba(15, 29, 50, 0.7);

  /* Border colors */
  --border-primary: #1E3A5F;
  --border-secondary: #0F1D32;
  --border-accent: rgba(0, 217, 255, 0.3);

  /* Text colors */
  --text-primary: #FFFFFF;
  --text-secondary: #94A3B8;
  --text-muted: #64748B;
  --text-accent: #00D9FF;

  /* Accent colors */
  --accent: #00D9FF;
  --accent-hover: #33E1FF;
  --accent-muted: rgba(0, 217, 255, 0.1);
  --accent-glow: 0 0 20px rgba(0, 217, 255, 0.3);

  /* Secondary accent */
  --secondary: #7C3AED;
  --secondary-hover: #8B5CF6;

  /* Status colors */
  --success: #06D6A0;
  --success-muted: rgba(6, 214, 160, 0.1);
  --warning: #F59E0B;
  --warning-muted: rgba(245, 158, 11, 0.1);
  --danger: #EF4444;
  --danger-muted: rgba(239, 68, 68, 0.1);
  --info: #06B6D4;
  --info-muted: rgba(6, 182, 212, 0.1);

  /* Cultivation phase colors */
  --phase-inoculation: #7C3AED;
  --phase-colonization: #00D9FF;
  --phase-fruiting: #A855F7;
  --phase-harvest: #06D6A0;
  --phase-storage: #3B82F6;

  /* Legacy color mappings for backwards compatibility */
  --color-primary: var(--accent);
  --color-primary-hover: var(--accent-hover);
  --color-primary-muted: var(--accent-muted);

  --color-surface: var(--bg-primary);
  --color-surface-elevated: var(--bg-secondary);
  --color-surface-hover: var(--bg-tertiary);

  --color-border: var(--border-primary);
  --color-border-muted: var(--border-secondary);

  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-muted);

  /* Spacing */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;

  /* Border Radius */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
}

/* ============================================================================
   THEME-SPECIFIC ADJUSTMENTS
   ============================================================================ */

/* Light theme (Spore) needs inverted scrollbar */
[data-theme="spore"] ::-webkit-scrollbar-track {
  background: #F5F5F0;
}

[data-theme="spore"] ::-webkit-scrollbar-thumb {
  background: #D4D4C8;
}

[data-theme="spore"] ::-webkit-scrollbar-thumb:hover {
  background: #A8A29E;
}

/* Selection color based on theme */
[data-theme="mycelium"] ::selection {
  background-color: rgba(0, 217, 255, 0.3);
}

[data-theme="fruiting"] ::selection {
  background-color: rgba(6, 214, 160, 0.3);
}

[data-theme="spore"] ::selection {
  background-color: rgba(123, 165, 136, 0.3);
  color: #1C1917;
}

[data-theme="substrate"] ::selection {
  background-color: rgba(193, 154, 107, 0.3);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  font-family: 'Plus Jakarta Sans', system-ui, -apple-system, sans-serif;
  font-size: 16px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  min-height: 100vh;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* ============================================================================
   MODAL/DIALOG OVERLAY - Critical Fix for Scrolling
   ============================================================================ */

/* Modal backdrop must be scrollable when content is taller than viewport */
.modal-overlay,
[class*="fixed inset-0"][class*="bg-black"] {
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch;
}

/* Ensure body doesn't scroll when modal is open */
body.modal-open {
  overflow: hidden;
}

/* Fix for all fixed overlay elements */
.fixed.inset-0 {
  overflow-y: auto;
}

/* Scrollbar Styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-surface);
}

::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-surface-hover);
}

/* Selection */
::selection {
  background-color: rgba(16, 185, 129, 0.3);
  color: var(--color-text-primary);
}

/* Focus States */
*:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Code/Monospace */
code, pre, .font-mono {
  font-family: 'JetBrains Mono', monospace;
}

/* Transitions */
.transition-default {
  transition: all 200ms ease;
}

/* Custom Button Styles */
.btn {
  @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-zinc-950;
}

.btn-primary {
  @apply bg-emerald-500 hover:bg-emerald-600 text-white focus:ring-emerald-500;
}

.btn-secondary {
  @apply bg-zinc-800 hover:bg-zinc-700 text-white border border-zinc-700 focus:ring-zinc-500;
}

.btn-ghost {
  @apply text-zinc-400 hover:text-white hover:bg-zinc-800;
}

/* Card Styles */
.card {
  @apply bg-zinc-900/50 border border-zinc-800 rounded-xl;
}

.card-header {
  @apply p-5 border-b border-zinc-800;
}

.card-body {
  @apply p-5;
}

/* Input Styles */
.input {
  @apply w-full bg-zinc-800 border border-zinc-700 rounded-lg px-4 py-2 text-white placeholder-zinc-500;
  @apply focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500;
}

.input-label {
  @apply block text-sm font-medium text-zinc-400 mb-1;
}

/* Badge Styles */
.badge {
  @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
}

.badge-success {
  @apply bg-emerald-950/50 text-emerald-400 border border-emerald-800;
}

.badge-warning {
  @apply bg-amber-950/50 text-amber-400 border border-amber-800;
}

.badge-error {
  @apply bg-red-950/50 text-red-400 border border-red-800;
}

.badge-info {
  @apply bg-blue-950/50 text-blue-400 border border-blue-800;
}

/* Status Indicators */
.status-dot {
  @apply w-2 h-2 rounded-full;
}

.status-active {
  @apply bg-emerald-500;
}

.status-warning {
  @apply bg-amber-500;
}

.status-error {
  @apply bg-red-500;
}

/* Animation Classes */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(10px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
  }
  50% {
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.8);
  }
}

.animate-fade-in {
  animation: fadeIn 300ms ease-out;
}

.animate-slide-up {
  animation: slideUp 300ms ease-out;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* ============================================================================
   MYCELIUM NAVIGATION SYSTEM - Organic Animations
   ============================================================================ */

/* Bioluminescent pulse - like glowing fungi */
@keyframes bioluminescence {
  0%, 100% {
    opacity: 0.4;
    filter: blur(8px);
  }
  50% {
    opacity: 0.8;
    filter: blur(12px);
  }
}

.animate-bioluminescence {
  animation: bioluminescence 3s ease-in-out infinite;
}

/* Spore dispersal - radial expansion */
@keyframes sporeDisperse {
  0% {
    transform: scale(0) rotate(0deg);
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(5deg);
    opacity: 1;
  }
}

.animate-spore-disperse {
  animation: sporeDisperse 300ms ease-out forwards;
}

/* Mycelium thread drawing */
@keyframes drawThread {
  0% {
    stroke-dashoffset: 100;
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    stroke-dashoffset: 0;
    opacity: 1;
  }
}

.animate-draw-thread {
  stroke-dasharray: 100;
  animation: drawThread 500ms ease-out forwards;
}

/* Fruiting body emergence - for nodes appearing */
@keyframes fruitingEmergence {
  0% {
    transform: translateY(20px) scale(0.8);
    opacity: 0;
  }
  60% {
    transform: translateY(-5px) scale(1.05);
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

.animate-fruiting {
  animation: fruitingEmergence 400ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Hyphal growth - spreading effect */
@keyframes hyphalGrowth {
  0% {
    clip-path: circle(0% at center);
    opacity: 0;
  }
  100% {
    clip-path: circle(100% at center);
    opacity: 1;
  }
}

.animate-hyphal-growth {
  animation: hyphalGrowth 500ms ease-out forwards;
}

/* Substrate pulse - background breathing effect */
@keyframes substratePulse {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.animate-substrate-pulse {
  background-size: 200% 200%;
  animation: substratePulse 8s ease-in-out infinite;
}

/* Organic node hover effect */
@keyframes organicBounce {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.hover-organic:hover {
  animation: organicBounce 300ms ease-out;
}

/* Connection thread pulsing */
@keyframes threadPulse {
  0%, 100% {
    stroke-opacity: 0.3;
    stroke-width: 1;
  }
  50% {
    stroke-opacity: 0.7;
    stroke-width: 2;
  }
}

.animate-thread-pulse {
  animation: threadPulse 2s ease-in-out infinite;
}

/* Spore burst effect for menu */
@keyframes sporeBurst {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  70% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Staggered animation delays for spore items */
.spore-item-0 { animation-delay: 0ms; }
.spore-item-1 { animation-delay: 30ms; }
.spore-item-2 { animation-delay: 60ms; }
.spore-item-3 { animation-delay: 90ms; }
.spore-item-4 { animation-delay: 120ms; }
.spore-item-5 { animation-delay: 150ms; }
.spore-item-6 { animation-delay: 180ms; }
.spore-item-7 { animation-delay: 210ms; }

/* Hide scrollbar for trail navigation */
.scrollbar-none {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-none::-webkit-scrollbar {
  display: none;
}

/* Mycelium network background for hub */
.bg-mycelium-network {
  background-image:
    radial-gradient(circle at 20% 30%, rgba(16, 185, 129, 0.08) 0%, transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(20, 184, 166, 0.08) 0%, transparent 40%),
    radial-gradient(circle at 50% 50%, rgba(16, 185, 129, 0.05) 0%, transparent 60%),
    radial-gradient(circle at 30% 70%, rgba(59, 130, 246, 0.05) 0%, transparent 40%),
    radial-gradient(circle at 70% 30%, rgba(168, 85, 247, 0.05) 0%, transparent 40%);
}

/* Organic glow effects for different categories */
.glow-emerald {
  box-shadow: 0 0 20px rgba(16, 185, 129, 0.5), 0 0 40px rgba(16, 185, 129, 0.2);
}
.glow-blue {
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.5), 0 0 40px rgba(59, 130, 246, 0.2);
}
.glow-purple {
  box-shadow: 0 0 20px rgba(168, 85, 247, 0.5), 0 0 40px rgba(168, 85, 247, 0.2);
}
.glow-amber {
  box-shadow: 0 0 20px rgba(245, 158, 11, 0.5), 0 0 40px rgba(245, 158, 11, 0.2);
}
.glow-cyan {
  box-shadow: 0 0 20px rgba(6, 182, 212, 0.5), 0 0 40px rgba(6, 182, 212, 0.2);
}
.glow-pink {
  box-shadow: 0 0 20px rgba(236, 72, 153, 0.5), 0 0 40px rgba(236, 72, 153, 0.2);
}

/* Progress Bar */
.progress-bar {
  @apply relative h-2 bg-zinc-800 rounded-full overflow-hidden;
}

.progress-bar-fill {
  @apply absolute inset-y-0 left-0 bg-gradient-to-r from-emerald-500 to-teal-400 rounded-full transition-all duration-500;
}

/* Table Styles */
.table {
  @apply w-full text-sm text-left;
}

.table th {
  @apply px-4 py-3 text-xs font-medium text-zinc-500 uppercase tracking-wider bg-zinc-900;
}

.table td {
  @apply px-4 py-3 text-zinc-300 border-b border-zinc-800;
}

.table tr:hover td {
  @apply bg-zinc-800/50;
}

/* Modal/Dialog Backdrop - Fixed for scroll */
.modal-backdrop {
  @apply fixed inset-0 bg-black/70 flex items-start justify-center z-50 overflow-y-auto p-4;
}

.modal-content {
  @apply bg-zinc-900 border border-zinc-700 rounded-xl p-6 w-full max-w-lg animate-slide-up my-8;
}

/* Ensure modals don't get cut off */
@media (max-height: 600px) {
  .modal-backdrop {
    @apply items-start py-4;
  }
  .modal-content {
    @apply my-4;
  }
}

/* Tooltip */
.tooltip {
  @apply absolute z-50 px-2 py-1 text-xs text-white bg-zinc-800 rounded shadow-lg;
}

/* Empty State */
.empty-state {
  @apply flex flex-col items-center justify-center p-12 text-center;
}

.empty-state-icon {
  @apply w-16 h-16 mb-4 rounded-full bg-zinc-800 flex items-center justify-center text-2xl;
}

/* Loading Spinner */
.spinner {
  @apply w-5 h-5 border-2 border-zinc-700 border-t-emerald-500 rounded-full animate-spin;
}

/* Organic/Mycelium Network Background Pattern */
.bg-mycelium {
  background-image: 
    radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(20, 184, 166, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.02) 0%, transparent 30%);
}

/* Subtle grid pattern for scientific feel */
.bg-grid {
  background-image: 
    linear-gradient(rgba(39, 39, 42, 0.5) 1px, transparent 1px),
    linear-gradient(90deg, rgba(39, 39, 42, 0.5) 1px, transparent 1px);
  background-size: 40px 40px;
}

/* ============================================================================
   MOBILE-FIRST RESPONSIVE UTILITIES
   ============================================================================ */

/* Touch-friendly input sizing */
@media (max-width: 640px) {
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="date"],
  input[type="time"],
  input[type="search"],
  select,
  textarea {
    font-size: 16px !important; /* Prevents iOS zoom on focus */
    min-height: 44px; /* Apple's recommended touch target */
    padding: 0.75rem 1rem;
  }

  button {
    min-height: 44px;
  }
}

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
  .safe-area-inset {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }

  .safe-area-bottom {
    padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
  }
}

/* Responsive typography */
.text-responsive-xs {
  @apply text-xs sm:text-sm;
}

.text-responsive-sm {
  @apply text-sm sm:text-base;
}

.text-responsive-base {
  @apply text-base sm:text-lg;
}

.text-responsive-lg {
  @apply text-lg sm:text-xl md:text-2xl;
}

.text-responsive-xl {
  @apply text-xl sm:text-2xl md:text-3xl;
}

/* Touch-friendly buttons */
.btn-touch {
  @apply min-h-[44px] px-4 py-3 sm:min-h-0 sm:py-2;
}

/* Mobile-friendly spacing */
.space-responsive {
  @apply space-y-3 sm:space-y-4;
}

.gap-responsive {
  @apply gap-2 sm:gap-3 md:gap-4;
}

.p-responsive {
  @apply p-3 sm:p-4 md:p-6;
}

/* Prevent text overflow */
.text-truncate {
  @apply truncate;
}

/* Safe area for content - prevents overflow */
.content-area {
  @apply w-full max-w-full overflow-hidden;
}

/* Responsive grids that don't overflow */
.responsive-grid {
  @apply grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4;
}

/* Responsive stat cards */
.stat-grid {
  @apply grid gap-3 grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6;
}

/* Detail panel responsive */
@media (max-width: 1024px) {
  .detail-panel {
    @apply fixed inset-0 z-50 bg-zinc-950;
  }
}

/* Hide on mobile */
.hide-mobile {
  @apply hidden sm:block;
}

/* Show only on mobile */
.show-mobile {
  @apply block sm:hidden;
}

/* Responsive filter bar */
.filter-bar {
  @apply flex flex-wrap items-center gap-2 sm:gap-3;
}

/* Scrollable table container */
.table-container {
  @apply overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0;
}

/* Mobile-friendly modal */
@media (max-width: 640px) {
  .modal-content {
    @apply mx-4 max-h-[90vh] overflow-y-auto;
  }
}

/* Prevent horizontal scroll on body */
html, body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Safe content padding for pages */
.page-content {
  @apply p-4 sm:p-6;
}

/* Responsive card */
.card-responsive {
  @apply bg-zinc-900/50 border border-zinc-800 rounded-lg sm:rounded-xl p-3 sm:p-4;
}

/* Sticky sidebar for desktop */
@media (min-width: 1024px) {
  .sidebar-sticky {
    position: sticky;
    top: 1.5rem;
    max-height: calc(100vh - 3rem);
    overflow-y: auto;
  }
}

/* ============================================================================
   ECOLOGICAL AMBIENCE - Living Interface Effects
   Subtle, organic, and performance-conscious animations
   ============================================================================ */

/* Living Background - Slow breathing gradient that evokes underground mycelium */
@keyframes ambientBreathing {
  0%, 100% {
    background-position: 0% 50%;
    filter: brightness(1);
  }
  25% {
    background-position: 50% 100%;
  }
  50% {
    background-position: 100% 50%;
    filter: brightness(1.02);
  }
  75% {
    background-position: 50% 0%;
  }
}

.bg-ambient-living {
  background:
    radial-gradient(ellipse at 10% 20%, rgba(16, 185, 129, 0.04) 0%, transparent 50%),
    radial-gradient(ellipse at 90% 80%, rgba(20, 184, 166, 0.03) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(6, 95, 70, 0.02) 0%, transparent 60%),
    linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
  background-size: 400% 400%;
  animation: ambientBreathing 30s ease-in-out infinite;
}

/* Reduce motion for accessibility and mobile battery */
@media (prefers-reduced-motion: reduce) {
  .bg-ambient-living {
    animation: none;
  }
}

/* Subtle underground depth - adds texture like forest floor */
.texture-organic {
  position: relative;
}

.texture-organic::before {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0.015;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  pointer-events: none;
  mix-blend-mode: overlay;
}

/* Bioluminescent focus rings - organic glow instead of harsh outline */
.focus-bioluminescent:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px var(--bg-primary),
    0 0 0 4px rgba(16, 185, 129, 0.5),
    0 0 20px rgba(16, 185, 129, 0.2);
}

/* Organic card hover - subtle lift like emerging from substrate */
.card-organic {
  transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
              box-shadow 0.4s ease,
              border-color 0.3s ease;
}

.card-organic:hover {
  transform: translateY(-2px);
  box-shadow:
    0 8px 25px -5px rgba(0, 0, 0, 0.4),
    0 0 30px rgba(16, 185, 129, 0.05);
}

/* Spore drift - very subtle floating particles */
@keyframes sporeDrift {
  0%, 100% {
    transform: translateY(0) translateX(0) rotate(0deg);
    opacity: 0.3;
  }
  25% {
    transform: translateY(-8px) translateX(3px) rotate(90deg);
    opacity: 0.5;
  }
  50% {
    transform: translateY(-15px) translateX(-2px) rotate(180deg);
    opacity: 0.4;
  }
  75% {
    transform: translateY(-8px) translateX(4px) rotate(270deg);
    opacity: 0.5;
  }
}

.spore-particle {
  position: absolute;
  width: 2px;
  height: 2px;
  background: rgba(16, 185, 129, 0.6);
  border-radius: 50%;
  pointer-events: none;
  animation: sporeDrift 8s ease-in-out infinite;
}

/* Mycelium network pulse - for connected elements */
@keyframes networkPulse {
  0%, 100% {
    opacity: 0.1;
    transform: scale(1);
  }
  50% {
    opacity: 0.2;
    transform: scale(1.02);
  }
}

.network-pulse {
  animation: networkPulse 4s ease-in-out infinite;
}

/* Substrate gradient - rich earthy undertones */
.gradient-substrate {
  background: linear-gradient(
    135deg,
    rgba(15, 29, 50, 1) 0%,
    rgba(12, 35, 30, 1) 50%,
    rgba(15, 29, 50, 1) 100%
  );
}

/* Colonization progress glow */
@keyframes colonizationGlow {
  0%, 100% {
    box-shadow: 0 0 5px rgba(16, 185, 129, 0.3);
  }
  50% {
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.5), 0 0 30px rgba(16, 185, 129, 0.2);
  }
}

.glow-colonization {
  animation: colonizationGlow 3s ease-in-out infinite;
}

/* Organic border - subtle gradient border like mycelium edge */
.border-organic {
  border: 1px solid transparent;
  background:
    linear-gradient(var(--bg-secondary), var(--bg-secondary)) padding-box,
    linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(20, 184, 166, 0.1), rgba(16, 185, 129, 0.2)) border-box;
}

/* Smooth state transitions - everything feels alive */
.transition-organic {
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Fruiting stage shimmer - subtle iridescence */
@keyframes fruitingShimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

.shimmer-fruiting {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(168, 85, 247, 0.1) 25%,
    rgba(16, 185, 129, 0.15) 50%,
    rgba(168, 85, 247, 0.1) 75%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: fruitingShimmer 8s linear infinite;
}

/* Enhanced status indicators with organic feel */
.status-active-organic {
  position: relative;
}

.status-active-organic::after {
  content: '';
  position: absolute;
  inset: -2px;
  background: inherit;
  border-radius: inherit;
  filter: blur(4px);
  opacity: 0.4;
  z-index: -1;
  animation: bioluminescence 3s ease-in-out infinite;
}

/* Underground depth shadows - multi-layered for realism */
.shadow-depth {
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.2),
    0 4px 8px rgba(0, 0, 0, 0.15),
    0 8px 16px rgba(0, 0, 0, 0.1),
    0 16px 32px rgba(0, 0, 0, 0.05);
}

/* Ambient underscore - subtle accent line with gradient */
.accent-underscore {
  position: relative;
}

.accent-underscore::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(16, 185, 129, 0.5) 20%,
    rgba(20, 184, 166, 0.8) 50%,
    rgba(16, 185, 129, 0.5) 80%,
    transparent 100%
  );
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.accent-underscore:hover::after,
.accent-underscore:focus-within::after {
  transform: scaleX(1);
}

/* Ecological color enhancements */
.text-forest {
  color: #059669;
}

.text-lichen {
  color: #7BA588;
}

.text-substrate-brown {
  color: #8B7355;
}

.bg-forest-floor {
  background: linear-gradient(
    to bottom,
    rgba(6, 95, 70, 0.05) 0%,
    rgba(0, 0, 0, 0) 100%
  );
}

/* Alive input fields - subtle breathing when focused */
@keyframes inputBreathing {
  0%, 100% {
    box-shadow: 0 0 0 1px rgba(16, 185, 129, 0.3);
  }
  50% {
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.4), 0 0 10px rgba(16, 185, 129, 0.1);
  }
}

.input-organic:focus {
  animation: inputBreathing 2s ease-in-out infinite;
  border-color: rgba(16, 185, 129, 0.5);
}

/* Harvest celebration - golden warmth */
@keyframes harvestGlow {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.glow-harvest {
  background: linear-gradient(
    90deg,
    rgba(245, 158, 11, 0.1) 0%,
    rgba(234, 179, 8, 0.2) 50%,
    rgba(245, 158, 11, 0.1) 100%
  );
  background-size: 200% 100%;
  animation: harvestGlow 4s ease-in-out infinite;
}

/* Mobile optimizations - reduce animations */
@media (max-width: 640px) {
  .bg-ambient-living {
    animation-duration: 60s; /* Slower on mobile for battery */
  }

  .card-organic:hover {
    transform: none; /* Disable hover transforms on touch */
  }

  .spore-particle {
    animation: none;
    display: none;
  }
}

/* High performance mode - for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================================================
   THEME-SPECIFIC ECOLOGICAL AMBIENCE
   Each theme has its own ambient living background and effects
   ============================================================================ */

/* MYCELIUM THEME - Bioluminescent underground network */
[data-theme="mycelium"] {
  --ambient-color-1: rgba(0, 217, 255, 0.04);
  --ambient-color-2: rgba(124, 58, 237, 0.03);
  --ambient-color-3: rgba(6, 182, 212, 0.03);
  --glow-primary: rgba(0, 217, 255, 0.3);
  --glow-secondary: rgba(124, 58, 237, 0.2);
}

[data-theme="mycelium"] .ambient-bg {
  background:
    radial-gradient(ellipse at 15% 25%, var(--ambient-color-1) 0%, transparent 45%),
    radial-gradient(ellipse at 85% 75%, var(--ambient-color-2) 0%, transparent 45%),
    radial-gradient(ellipse at 50% 50%, var(--ambient-color-3) 0%, transparent 55%);
}

/* FRUITING THEME - Forest floor emergence */
[data-theme="fruiting"] {
  --ambient-color-1: rgba(6, 214, 160, 0.04);
  --ambient-color-2: rgba(247, 127, 0, 0.03);
  --ambient-color-3: rgba(27, 67, 50, 0.05);
  --glow-primary: rgba(6, 214, 160, 0.3);
  --glow-secondary: rgba(247, 127, 0, 0.2);
}

[data-theme="fruiting"] .ambient-bg {
  background:
    radial-gradient(ellipse at 20% 80%, var(--ambient-color-1) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, var(--ambient-color-2) 0%, transparent 45%),
    radial-gradient(ellipse at 50% 100%, var(--ambient-color-3) 0%, transparent 60%);
}

/* SPORE THEME - Clean, airy, morning light */
[data-theme="spore"] {
  --ambient-color-1: rgba(123, 165, 136, 0.03);
  --ambient-color-2: rgba(74, 144, 164, 0.02);
  --ambient-color-3: rgba(168, 162, 158, 0.02);
  --glow-primary: rgba(123, 165, 136, 0.2);
  --glow-secondary: rgba(74, 144, 164, 0.15);
}

[data-theme="spore"] .ambient-bg {
  background:
    radial-gradient(ellipse at 10% 10%, var(--ambient-color-1) 0%, transparent 50%),
    radial-gradient(ellipse at 90% 90%, var(--ambient-color-2) 0%, transparent 50%),
    linear-gradient(180deg, transparent 0%, var(--ambient-color-3) 100%);
}

/* SUBSTRATE THEME - Warm, earthy, underground warmth */
[data-theme="substrate"] {
  --ambient-color-1: rgba(193, 154, 107, 0.04);
  --ambient-color-2: rgba(85, 139, 47, 0.03);
  --ambient-color-3: rgba(62, 39, 35, 0.05);
  --glow-primary: rgba(193, 154, 107, 0.3);
  --glow-secondary: rgba(85, 139, 47, 0.2);
}

[data-theme="substrate"] .ambient-bg {
  background:
    radial-gradient(ellipse at 25% 75%, var(--ambient-color-1) 0%, transparent 50%),
    radial-gradient(ellipse at 75% 25%, var(--ambient-color-2) 0%, transparent 45%),
    linear-gradient(135deg, var(--ambient-color-3) 0%, transparent 60%);
}

/* Universal ambient wrapper */
.ambient-bg {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
  background-size: 400% 400%;
  animation: ambientBreathing 30s ease-in-out infinite;
}

/* Floating spore particles - theme-aware */
.ambient-particles {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
  overflow: hidden;
}

.ambient-particles::before,
.ambient-particles::after {
  content: '';
  position: absolute;
  width: 3px;
  height: 3px;
  background: var(--glow-primary);
  border-radius: 50%;
  opacity: 0.4;
  animation: sporeDrift 12s ease-in-out infinite;
}

.ambient-particles::before {
  top: 20%;
  left: 15%;
  animation-delay: 0s;
}

.ambient-particles::after {
  top: 60%;
  right: 20%;
  animation-delay: -6s;
}

/* Subtle vignette for depth */
.vignette {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 60%,
    rgba(0, 0, 0, 0.15) 100%
  );
}

[data-theme="spore"] .vignette {
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 70%,
    rgba(0, 0, 0, 0.05) 100%
  );
}

/* Animated gradient border for featured elements */
@keyframes borderFlow {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.border-animated {
  border: 2px solid transparent;
  background:
    linear-gradient(var(--bg-secondary), var(--bg-secondary)) padding-box,
    linear-gradient(90deg, var(--accent), var(--secondary), var(--accent)) border-box;
  background-size: 200% 200%;
  animation: borderFlow 4s ease infinite;
}

/* Card glass morphism effect */
.glass {
  background: var(--bg-card);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid var(--border-primary);
}

[data-theme="spore"] .glass {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

/* Organic glow on hover for interactive elements */
.hover-glow {
  transition: box-shadow 0.3s ease, transform 0.2s ease;
}

.hover-glow:hover {
  box-shadow: 0 0 20px var(--glow-primary), 0 0 40px var(--glow-secondary);
}

/* Progress bars with organic flow */
@keyframes progressFlow {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 200% 50%;
  }
}

.progress-organic {
  background: linear-gradient(
    90deg,
    var(--accent) 0%,
    var(--accent-hover) 25%,
    var(--accent) 50%,
    var(--accent-hover) 75%,
    var(--accent) 100%
  );
  background-size: 200% 100%;
  animation: progressFlow 2s linear infinite;
}

/* Subtle texture noise overlay */
.texture-noise {
  position: relative;
}

.texture-noise::before {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0.02;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  pointer-events: none;
  mix-blend-mode: overlay;
  border-radius: inherit;
  z-index: 1;
}

[data-theme="spore"] .texture-noise::before {
  opacity: 0.01;
  mix-blend-mode: multiply;
}

/* Smooth page transitions */
.page-enter {
  opacity: 0;
  transform: translateY(8px);
}

.page-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity 300ms ease-out, transform 300ms ease-out;
}

/* Status dot with pulse */
.status-pulse {
  position: relative;
}

.status-pulse::after {
  content: '';
  position: absolute;
  inset: -3px;
  border-radius: 50%;
  background: inherit;
  opacity: 0.5;
  animation: pulseRing 2s ease-out infinite;
}

@keyframes pulseRing {
  0% {
    transform: scale(1);
    opacity: 0.5;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

/* Theme transition smoothing */
:root {
  transition: background-color 0.3s ease-out, color 0.3s ease-out;
}

/* Mobile: Disable heavy effects for battery */
@media (max-width: 640px) {
  .ambient-bg {
    animation-duration: 60s;
  }

  .ambient-particles::before,
  .ambient-particles::after {
    display: none;
  }

  .vignette {
    background: none;
  }

  .hover-glow:hover {
    box-shadow: none;
  }
}
